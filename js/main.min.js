(function(e){var r=e(window),u=new WebStorageCache({storage:"localStorage"}),s=13,c="https://api.github.com/search/code?sort=indexed&order=desc",l="repo:ZYallers/ZYaller+extension:md",g={defAnimation:"fadeInUp",scrollDuration:800,statsDuration:4000},b=["/images/random/work1.jpg","/images/random/work2.jpg","/images/random/work3.jpg","/images/random/liberty.jpg","/images/random/concert.jpg","/images/random/shutterbug.jpg","/images/random/usaf-rocket.jpg","http://uploadbeta.com/api/pictures/random?key=推女郎","http://uploadbeta.com/api/pictures/random?key=性感","http://uploadbeta.com/api/pictures/random?key=美腿"],q=["#",">","`","<","/","*","-","!"];var m={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(D){var B="";var K,I,G,J,H,F,E;var C=0;D=m._utf8_encode(D);while(C<D.length){K=D.charCodeAt(C++);I=D.charCodeAt(C++);G=D.charCodeAt(C++);J=K>>2;H=((K&3)<<4)|(I>>4);F=((I&15)<<2)|(G>>6);E=G&63;if(isNaN(I)){F=E=64}else{if(isNaN(G)){E=64}}B=B+this._keyStr.charAt(J)+this._keyStr.charAt(H)+this._keyStr.charAt(F)+this._keyStr.charAt(E)}return B},decode:function(D){var B="";var K,I,G;var J,H,F,E;var C=0;D=D.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(C<D.length){J=this._keyStr.indexOf(D.charAt(C++));H=this._keyStr.indexOf(D.charAt(C++));F=this._keyStr.indexOf(D.charAt(C++));E=this._keyStr.indexOf(D.charAt(C++));K=(J<<2)|(H>>4);I=((H&15)<<4)|(F>>2);G=((F&3)<<6)|E;B=B+String.fromCharCode(K);if(F!=64){B=B+String.fromCharCode(I)}if(E!=64){B=B+String.fromCharCode(G)}}B=m._utf8_decode(B);return B},_utf8_encode:function(C){C=C.replace(/\r\n/g,"\n");var B="";for(var E=0;E<C.length;E++){var D=C.charCodeAt(E);if(D<128){B+=String.fromCharCode(D)}else{if((D>127)&&(D<2048)){B+=String.fromCharCode((D>>6)|192);B+=String.fromCharCode((D&63)|128)}else{B+=String.fromCharCode((D>>12)|224);B+=String.fromCharCode(((D>>6)&63)|128);B+=String.fromCharCode((D&63)|128)}}}return B},_utf8_decode:function(B){var D="",F=0,H=0,G=0,E=0,C=0;while(F<B.length){H=B.charCodeAt(F);if(H<128){D+=String.fromCharCode(H);F++}else{if((H>191)&&(H<224)){E=B.charCodeAt(F+1);D+=String.fromCharCode(((H&31)<<6)|(E&63));F+=2}else{E=B.charCodeAt(F+1);C=B.charCodeAt(F+2);D+=String.fromCharCode(((H&15)<<12)|((E&63)<<6)|(C&63));F+=3}}}return D}};var z=function(C){var B=window.location.search.substr(1).match(new RegExp("(^|&)"+C+"=([^&]*)(&|$)"));return B!=null?B[2]:null};var j=function(F){if(!(F>0)||F<=s){return}var D=e(".pagination"),B=[],H=z("q"),I=z("m"),G=z("page")||1,E=Math.ceil(F/s),C=(H?"q="+H:"")+(I?"&m="+I:"");C=C?"?"+C+"&page=":"?page=";if(G==1){B.push('<span class="page-numbers inactive">Prev</span>')}else{if(G>1){B.push('<a href="'+C+(parseInt(G)-1)+'" class="page-numbers">Prev</a>')}}B.push('<span class="page-numbers inactive">'+G+"</span>");if(G==E){B.push('<span class="page-numbers inactive">Next</span>')}else{if(G<E){B.push('<a href="'+C+(parseInt(G)+1)+'" class="page-numbers">Next</a>')}}D.html(B.join("\n"));D.parent().fadeIn()};var v=function(C,B){return C.replace(/\{\{([\w\-_\.]+)\}\}/gi,function(D,E){var F=B;E.split(".").forEach(function(G){F=F[G]});return F})};var o=function(C,F){var D=C.items,B=D.length;e.itemCount=B;e.reoadedItemCount=0;for(var E=0;E<B;E++){(function(T,S){var I=e("div.bricks-wrapper"),G=e("div.featured-grid"),H=e("ul.slides"),R=e("#lists-item-template").html(),Q=e("#flexslider-template").html();var L=b[Math.floor((Math.random()*b.length))];if(L.substring(0,4)!="http"){b=e.grep(b,function(V){return V!=L})}var P={sha:T["sha"],intro:"",link:T["html_url"],title:T["name"].slice(0,-3),meta:T["path"].split("/")[1],img:L};P.img+=(L.substring(0,4)=="http")?"&rd="+Math.floor(Math.random()*1000000):"";P.metalink="/?m="+P.meta;P.meta=P.meta.toUpperCase();e.itemCount>3&&G.removeClass("hide");if(e.itemCount>3&&S<3){H.append(v(Q,P))}else{I.append(v(R,P))}var O=true;if(u.isSupported()){var N=u.get(T["sha"]);if(N){O=false;e.reoadedItemCount++;var K=N.split("\n"),M=K.length;for(var J=2;J<M;J++){var U=e.trim(K[J]);if(U!=""&&e.inArray(U.slice(0,1),q)==-1){setTimeout(function(){var V=e("[sha="+T["sha"]+"]");if(V.attr("art")=="1"){V.find("div.entry-excerpt").html(U)}else{V.find("ul.entry-meta").children("li").eq(1).html(U)}},(S+1)*100);break}}}}if(O){e.ajax({url:T["git_url"],async:true,timeout:10000,dataType:"json",complete:function(ab,aa){e.reoadedItemCount++;console.log("reloaded item: ",T["sha"],"length: ",e.reoadedItemCount);if(aa=="success"){var Z=m.decode(ab["responseJSON"]["content"]),Y=Z.split("\n"),V=Y.length;for(var X=2;X<V;X++){var W=e.trim(Y[X]);if(W!=""&&e.inArray(W.slice(0,1),q)==-1){setTimeout(function(){var ac=e("[sha="+T["sha"]+"]");if(ac.attr("art")=="1"){ac.find("div.entry-excerpt").html(W)}else{ac.find("ul.entry-meta").children("li").eq(1).html(W)}u.isSupported()&&u.set(T["sha"],Z,{exp:3600})},(S+1)*100);break}}}}})}})(D[E],E)}typeof(F)=="function"&&F(C)};var k=function(I,G){var C=z("q"),J=z("m"),D=z("page")||1,F=(C||"")+"+path:tag"+(J?"/"+J:""),B=c+"&q="+F+"+"+l+"&page="+D+"&per_page="+s;var E=true;if(u.isSupported()){var H=u.get(encodeURI(B));if(H){E=false;typeof(I)=="function"&&I(H)}}if(E){e.ajax({url:B,async:true,timeout:10000,dataType:"json",success:function(K){u.isSupported()&&u.set(encodeURI(B),K,{exp:600});typeof(I)=="function"&&I(K)},error:function(L,K,M){typeof(G)=="function"&&G(K)}})}};var w=function(B){r.on("load",function(){e("#loader").fadeOut("slow",function(){e("#preloader").delay(300).fadeOut("slow",B)})})};var t=function(){e("ul.sf-menu").superfish({animation:{height:"show"},animationOut:{height:"hide"},cssArrows:false,delay:600})};var h=function(){var B=e(".menu-toggle"),C=e(".main-navigation");B.on("click",function(D){D.preventDefault();B.toggleClass("is-clicked");C.slideToggle();D.stopPropagation()});C.on("click",function(D){D.stopPropagation()});if(B.is(":visible")){C.addClass("mobile")}r.resize(function(){if(B.is(":visible")){C.addClass("mobile")}else{C.removeClass("mobile")}});e("#main-nav-wrap li a").on("click",function(){if(C.hasClass("mobile")){B.toggleClass("is-clicked");C.fadeOut()}});e(document).on("click",function(){if(C.is(":visible")){B.toggleClass("is-clicked");C.slideToggle()}})};var x=function(){var C=e(".search-wrap");var F=C.find(".search-field");var E=e("#close-search");var D=e(".search-trigger");var B=e("body");D.on("click",function(H){H.preventDefault();H.stopPropagation();var G=e(this);B.addClass("search-visible");setTimeout(function(){e(".search-wrap").find(".search-field").focus()},100)});E.on("click",function(G){if(B.hasClass("search-visible")){B.removeClass("search-visible");setTimeout(function(){e(".search-wrap").find(".search-field").blur()},100)}G.stopPropagation()});C.on("click",function(G){if(!e(G.target).is(".search-field")){E.trigger("click")}});F.on("click",function(G){G.stopPropagation()});F.attr({placeholder:"Type Your Keywords",autocomplete:"off"})};var a=function(){e(".bricks-wrapper").imagesLoaded(function(){console.log("images loaded");e.isLoadedImage=true})};var p=function(){e(".animate-this").each(function(C){var B=e(this);setTimeout(function(){B.addClass("animated fadeInUp")},C*200)});r.on("resize",function(){e(".animate-this").removeClass("animate-this animated fadeInUp")})};var d=function(){e.masonryResizeTimes=0;e.masonryResizeTask=setInterval(function(){console.log("try masonry resize...",e.masonryResizeTimes);e.masonryResizeTimes++;if(e.masonryResizeTimes>60){console.log("try masonry resize more than maximum");clearInterval(e.masonryResizeTask);iziToast.error({timeout:5000,icon:"fa fa-frown-o",position:"topRight",title:"TIMEOUT",message:"Try masonry resize more than maximum!"})}else{if(e.itemCount&&e.isLoadedImage&&e.reoadedItemCount==e.itemCount){console.log("masonry resized");clearInterval(e.masonryResizeTask);e(".bricks-wrapper").masonry({itemSelector:".entry",columnWidth:".grid-sizer",percentPosition:true,resize:true});iziToast.show({theme:"dark",timeout:1500,icon:"fa fa-smile-o",position:"topCenter",title:"OK",progressBarColor:"rgb(0, 255, 184)",message:"Masonry resized "+(e.masonryResizeTimes)+" successfully."})}}},500)};var i=function(){e("#featured-post-slider").flexslider({namespace:"flex-",controlsContainer:"",animation:"fade",controlNav:false,directionNav:true,smoothHeight:false,slideshowSpeed:7000,animationSpeed:600,randomize:false,touch:true,})};var f=function(){e(".smoothscroll").on("click",function(D){var C=this.hash,B=e(C);D.preventDefault();D.stopPropagation();e("html, body").stop().animate({"scrollTop":B.offset().top},g.scrollDuration,"swing").promise().done(function(){if(e("body").hasClass("menu-is-open")){e("#header-menu-trigger").trigger("click")}window.location.hash=C})})};var y=function(){e("input, textarea, select").placeholder()};var n=function(){var B=500,F=400,E=400,D=300,C=e("#go-top");r.on("scroll",function(){if(r.scrollTop()>=B){C.fadeIn(F)}else{C.fadeOut(E)}})};(function A(){w(function(){k(function(B){e("div.bricks-loading").hide();iziToast.show({theme:"dark",timeout:1500,icon:"fa fa-smile-o",position:"topCenter",title:"OK",progressBarColor:"rgb(0, 255, 184)",message:"Data loaded successfully."});if(B||B["incomplete_results"]===false){o(B,function(C){j(C["total_count"]);i();p();a();d()})}},function(B){var C="Error occurred, try reload it!";if(B=="timeout"){C="Network slow, try reload it!"}iziToast.error({timeout:5000,icon:"fa fa-frown-o",position:"topRight",title:B.toUpperCase(),message:C})})});t();h();x();f();y();n()})()})(jQuery);