(function(b,a){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return a(b,c)})}else{if(typeof module==="object"&&typeof module.exports==="object"){module.exports=a(b,require("jquery"))}else{b.lity=a(b,b.jQuery||b.Zepto)}}}(typeof window!=="undefined"?window:this,function(G,z){var d=G.document;var H=z(G);var f=z.Deferred;var w=z("html");var j=[];var E="aria-hidden";var k="lity-"+E;var g='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])';var L={esc:true,handler:null,handlers:{image:y,inline:c,youtube:m,vimeo:n,googlemaps:M,facebookvideo:b,iframe:o},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'};var l=/(^http:\/\/uploadbeta.com)|(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i;var p=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i;var B=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/;var i=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i;var e=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i;var F=(function(){var Q=d.createElement("div");var P={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var O in P){if(Q.style[O]!==undefined){return P[O]}}return false})();function r(P){var O=f();if(!F||!P.length){O.resolve()}else{P.one(F,O.resolve);setTimeout(O.resolve,500)}return O.promise()}function K(P,O,Q){if(arguments.length===1){return z.extend({},P)}if(typeof O==="string"){if(typeof Q==="undefined"){return typeof P[O]==="undefined"?null:P[O]}P[O]=Q}else{z.extend(P,O)}return this}function x(S){var P=decodeURI(S.split("#")[0]).split("&");var R={},Q;for(var O=0,T=P.length;O<T;O++){if(!P[O]){continue}Q=P[O].split("=");R[Q[0]]=Q[1]}return R}function C(O,P){return O+(O.indexOf("?")>-1?"&":"?")+z.param(P)}function h(O,P){var Q=O.indexOf("#");if(-1===Q){return P}if(Q>0){O=O.substr(Q)}return P+O}function v(O){return z('<span class="lity-error"/>').append(O)}function y(S,O){var T=(O.opener()&&O.opener().data("lity-desc"))||"Image with no description";var R=z('<img src="'+S+'" alt="'+T+'"/>');var Q=f();var P=function(){Q.reject(v("Failed loading image"))};R.on("load",function(){if(this.naturalWidth===0){return P()}Q.resolve(R)}).on("error",P);return Q.promise()}y.test=function(O){return l.test(O)};function c(S,O){var P,T,Q;try{P=z(S)}catch(R){return false}if(!P.length){return false}T=z('<i style="display:none !important"/>');Q=P.hasClass("lity-hide");O.element().one("lity:remove",function(){T.before(P).remove();if(Q&&!P.closest(".lity-content").length){P.addClass("lity-hide")}});return P.removeClass("lity-hide").after(T)}function m(P){var O=p.exec(P);if(!O){return false}return o(h(P,C("https://www.youtube"+(O[2]||"")+".com/embed/"+O[4],z.extend({autoplay:1},x(O[5]||"")))))}function n(P){var O=B.exec(P);if(!O){return false}return o(h(P,C("https://player.vimeo.com/video/"+O[3],z.extend({autoplay:1},x(O[4]||"")))))}function b(P){var O=e.exec(P);if(!O){return false}if(0!==P.indexOf("http")){P="https:"+P}return o(h(P,C("https://www.facebook.com/plugins/video.php?href="+P,z.extend({autoplay:1},x(O[4]||"")))))}function M(P){var O=i.exec(P);if(!O){return false}return o(h(P,C("https://www.google."+O[3]+"/maps?"+O[6],{output:O[6].indexOf("layer=c")>0?"svembed":"embed"})))}function o(O){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+O+'"/></div>'}function D(){return d.documentElement.clientHeight?d.documentElement.clientHeight:Math.round(H.height())}function s(P){var O=I();if(!O){return}if(P.keyCode===27&&!!O.options("esc")){O.close()}if(P.keyCode===9){A(P,O)}}function A(Q,O){var P=O.element().find(g);var R=P.index(d.activeElement);if(Q.shiftKey&&R<=0){P.get(P.length-1).focus();Q.preventDefault()}else{if(!Q.shiftKey&&R===P.length-1){P.get(0).focus();Q.preventDefault()}}}function q(){z.each(j,function(P,O){O.resize()})}function u(O){if(1===j.unshift(O)){w.addClass("lity-active");H.on({resize:q,keydown:s})}z("body > *").not(O.element()).addClass("lity-hidden").each(function(){var P=z(this);if(undefined!==P.data(k)){return}P.data(k,P.attr(E)||null)}).attr(E,"true")}function N(P){var O;P.element().attr(E,"true");if(1===j.length){w.removeClass("lity-active");H.off({resize:q,keydown:s})}j=z.grep(j,function(Q){return P!==Q});if(!!j.length){O=j[0].element()}else{O=z(".lity-hidden")}O.removeClass("lity-hidden").each(function(){var R=z(this),Q=R.data(k);if(!Q){R.removeAttr(E)}else{R.attr(E,Q)}R.removeData(k)})}function I(){if(0===j.length){return null}return j[0]}function t(T,O,Q,P){var R="inline",S;var U=z.extend({},Q);if(P&&U[P]){S=U[P](T,O);R=P}else{z.each(["inline","iframe"],function(W,V){delete U[V];U[V]=Q[V]});z.each(U,function(V,W){if(!W){return true}if(W.test&&!W.test(T,O)){return true}S=W(T,O);if(false!==S){R=V;return false}})}return{handler:R,content:S||""}}function J(S,X,V,P){var W=this;var Y;var T=false;var O=false;var Q;var R;X=z.extend({},L,X);Q=z(X.template);W.element=function(){return Q};W.opener=function(){return V};W.options=z.proxy(K,W,X);W.handlers=z.proxy(K,W,X.handlers);W.resize=function(){if(!T||O){return}R.css("max-height",D()+"px").trigger("lity:resize",[W])};W.close=function(){if(!T||O){return}O=true;N(W);var Z=f();if(P&&(d.activeElement===Q[0]||z.contains(Q[0],d.activeElement))){try{P.focus()}catch(aa){}}R.trigger("lity:close",[W]);Q.removeClass("lity-opened").addClass("lity-closed");r(R.add(Q)).always(function(){R.trigger("lity:remove",[W]);Q.remove();Q=undefined;Z.resolve()});return Z.promise()};Y=t(S,W,X.handlers,X.handler);Q.attr(E,"false").addClass("lity-loading lity-opened lity-"+Y.handler).appendTo("body").focus().on("click","[data-lity-close]",function(Z){if(z(Z.target).is("[data-lity-close]")){W.close()}}).trigger("lity:open",[W]);u(W);z.when(Y.content).always(U);function U(Z){R=z(Z).css("max-height",D()+"px");Q.find(".lity-loader").each(function(){var aa=z(this);r(aa).always(function(){aa.remove()})});Q.removeClass("lity-loading").find(".lity-content").empty().append(R);T=true;R.trigger("lity:ready",[W])}}function a(R,P,Q){if(!R.preventDefault){Q=z(Q)}else{R.preventDefault();Q=z(this);R=Q.data("lity-target")||Q.attr("href")||Q.attr("src")}var O=new J(R,z.extend({},Q.data("lity-options")||Q.data("lity"),P),Q,d.activeElement);if(!R.preventDefault){return O}}a.version="2.3.1";a.options=z.proxy(K,a,L);a.handlers=z.proxy(K,a,L.handlers);a.current=I;z(d).on("click.lity","[data-lity]",a);return a}));