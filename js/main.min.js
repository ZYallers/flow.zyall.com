(function(e){var t=e(window),x=new WebStorageCache({storage:"localStorage"}),v=10,d="https://api.github.com/search/code?sort=indexed&order=desc",l="repo:ZYallers/ZYaller+extension:md",f={defAnimation:"fadeInUp",scrollDuration:800,statsDuration:4000},w=["/images/random/work1.jpg","/images/random/work2.jpg","/images/random/work3.jpg","/images/random/liberty.jpg","/images/random/concert.jpg","/images/random/shutterbug.jpg","/images/random/usaf-rocket.jpg","https://uploadbeta.com/api/pictures/random?key=推女郎"],s=["#",">","`","<","/","*","-","!"];var n={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(D){var B="";var K,I,G,J,H,F,E;var C=0;D=n._utf8_encode(D);while(C<D.length){K=D.charCodeAt(C++);I=D.charCodeAt(C++);G=D.charCodeAt(C++);J=K>>2;H=((K&3)<<4)|(I>>4);F=((I&15)<<2)|(G>>6);E=G&63;if(isNaN(I)){F=E=64}else{if(isNaN(G)){E=64}}B=B+this._keyStr.charAt(J)+this._keyStr.charAt(H)+this._keyStr.charAt(F)+this._keyStr.charAt(E)}return B},decode:function(D){var B="";var K,I,G;var J,H,F,E;var C=0;D=D.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(C<D.length){J=this._keyStr.indexOf(D.charAt(C++));H=this._keyStr.indexOf(D.charAt(C++));F=this._keyStr.indexOf(D.charAt(C++));E=this._keyStr.indexOf(D.charAt(C++));K=(J<<2)|(H>>4);I=((H&15)<<4)|(F>>2);G=((F&3)<<6)|E;B=B+String.fromCharCode(K);if(F!=64){B=B+String.fromCharCode(I)}if(E!=64){B=B+String.fromCharCode(G)}}B=n._utf8_decode(B);return B},_utf8_encode:function(C){C=C.replace(/\r\n/g,"\n");var B="";for(var E=0;E<C.length;E++){var D=C.charCodeAt(E);if(D<128){B+=String.fromCharCode(D)}else{if((D>127)&&(D<2048)){B+=String.fromCharCode((D>>6)|192);B+=String.fromCharCode((D&63)|128)}else{B+=String.fromCharCode((D>>12)|224);B+=String.fromCharCode(((D>>6)&63)|128);B+=String.fromCharCode((D&63)|128)}}}return B},_utf8_decode:function(B){var D="",F=0,H=0,G=0,E=0,C=0;while(F<B.length){H=B.charCodeAt(F);if(H<128){D+=String.fromCharCode(H);F++}else{if((H>191)&&(H<224)){E=B.charCodeAt(F+1);D+=String.fromCharCode(((H&31)<<6)|(E&63));F+=2}else{E=B.charCodeAt(F+1);C=B.charCodeAt(F+2);D+=String.fromCharCode(((H&15)<<12)|((E&63)<<6)|(C&63));F+=3}}}return D}};var i=function(C){var B=window.location.search.substr(1).match(new RegExp("(^|&)"+C+"=([^&]*)(&|$)"));return B!=null?B[2]:null};var g=function(F){if(!(F>0)||F<=v){return}var D=e(".pagination"),B=[],H=i("q"),I=i("m"),G=i("page")||1,E=Math.ceil(F/v),C=(H?"q="+H:"")+(I?"&m="+I:"");C=C?"?"+C+"&page=":"?page=";if(G==1){B.push('<span class="page-numbers inactive">Prev</span>')}else{if(G>1){B.push('<a href="'+C+(parseInt(G)-1)+'" class="page-numbers">Prev</a>')}}B.push('<span class="page-numbers inactive">'+G+"</span>");if(G==E){B.push('<span class="page-numbers inactive">Next</span>')}else{if(G<E){B.push('<a href="'+C+(parseInt(G)+1)+'" class="page-numbers">Next</a>')}}D.html(B.join("\n"));D.parent().fadeIn()};var m=function(C,B){return C.replace(/\{\{([\w\-_\.]+)\}\}/gi,function(D,E){var F=B;E.split(".").forEach(function(G){F=F[G]});return F})};var b=function(C,H){var E=C["items"],B=E.length,F=e(".bricks-wrapper"),D=e("#lists-item-template").html();e.itemCount=B;e.reoadedItemCount=0;for(var G=0;G<B;G++){(function(Q,I,P){var R=w[Math.floor((Math.random()*w.length))];if(R.substring(0,4)!="http"){w=e.grep(w,function(T){return T!=R})}var K={"sha":Q["sha"],"intro":"","link":Q["html_url"],"img":R,"title":Q["name"].slice(0,-3),"meta":Q["path"].split("/")[1]};K["img"]+=(R.substring(0,4)=="http")?"&r="+Math.random():"";K["metalink"]=d+"&q=path:tag/"+K["meta"]+"+"+l;K["meta"]=K["meta"].toUpperCase();I.append(m(P,K));var O=true;if(x.isSupported()){var N=x.get(Q["sha"]);if(N){O=false;e.reoadedItemCount++;var L=N.split("\n"),M=L.length;for(var J=2;J<M;J++){var S=e.trim(L[J]);if(S!=""&&e.inArray(S.slice(0,1),s)==-1){setTimeout(function(){e("[sha="+Q["sha"]+"]").find(".entry-excerpt").html(S)},(G+1)*100);break}}}}if(O){e.ajax({url:Q["git_url"],async:true,timeout:10000,dataType:"json",complete:function(Z,Y){e.reoadedItemCount++;console.log("reloaded item: ",Q["sha"],"length: ",e.reoadedItemCount);if(Y=="success"){var X=n.decode(Z["responseJSON"]["content"]),W=X.split("\n"),T=W.length;for(var V=2;V<T;V++){var U=e.trim(W[V]);if(U!=""&&e.inArray(U.slice(0,1),s)==-1){setTimeout(function(){e("[sha="+Q["sha"]+"]").find(".entry-excerpt").html(U);x.isSupported()&&x.set(Q["sha"],X,{exp:3600})},(G+1)*100);break}}}}})}})(E[G],F,D)}typeof(H)=="function"&&H(C)};var r=function(I,G){var C=i("q"),J=i("m"),D=i("page")||1,F=(C||"")+"+path:tag"+(J?"/"+J:""),B=d+"&q="+F+"+"+l+"&page="+D+"&per_page="+v;var E=true;if(x.isSupported()){var H=x.get(encodeURI(B));if(H){E=false;typeof(I)=="function"&&I(H)}}if(E){e.ajax({url:B,async:true,timeout:10000,dataType:"json",success:function(K){x.isSupported()&&x.set(encodeURI(B),K,{exp:600});typeof(I)=="function"&&I(K)},error:function(L,K,M){typeof(G)=="function"&&G(K)}})}};var z=function(B){t.on("load",function(){e("#loader").fadeOut("slow",function(){e("#preloader").delay(300).fadeOut("slow",B)})})};var h=function(){e("ul.sf-menu").superfish({animation:{height:"show"},animationOut:{height:"hide"},cssArrows:false,delay:600})};var k=function(){var B=e(".menu-toggle"),C=e(".main-navigation");B.on("click",function(D){D.preventDefault();B.toggleClass("is-clicked");C.slideToggle()});if(B.is(":visible")){C.addClass("mobile")}t.resize(function(){if(B.is(":visible")){C.addClass("mobile")}else{C.removeClass("mobile")}});e("#main-nav-wrap li a").on("click",function(){if(C.hasClass("mobile")){B.toggleClass("is-clicked");C.fadeOut()}})};var j=function(){var C=e(".search-wrap");var F=C.find(".search-field");var E=e("#close-search");var D=e(".search-trigger");var B=e("body");D.on("click",function(H){H.preventDefault();H.stopPropagation();var G=e(this);B.addClass("search-visible");setTimeout(function(){e(".search-wrap").find(".search-field").focus()},100)});E.on("click",function(G){if(B.hasClass("search-visible")){B.removeClass("search-visible");setTimeout(function(){e(".search-wrap").find(".search-field").blur()},100)}G.stopPropagation()});C.on("click",function(G){if(!e(G.target).is(".search-field")){E.trigger("click")}});F.on("click",function(G){G.stopPropagation()});F.attr({placeholder:"Type Your Keywords",autocomplete:"off"})};var y=function(){e(".bricks-wrapper").imagesLoaded(function(){console.log("images loaded");e.isLoadedImage=true})};var o=function(){e(".animate-this").each(function(C){var B=e(this);setTimeout(function(){B.addClass("animated fadeInUp")},C*200)});t.on("resize",function(){e(".animate-this").removeClass("animate-this animated fadeInUp")})};var q=function(){e.masonryResizeTimes=0;e.masonryResizeTask=setInterval(function(){console.log("try masonry resize...",e.masonryResizeTimes);e.masonryResizeTimes++;if(e.masonryResizeTimes>60){console.log("try masonry resize more than maximum");clearInterval(e.masonryResizeTask);iziToast.error({timeout:5000,icon:"fa fa-frown-o",position:"topRight",title:"TIMEOUT",message:"Try masonry resize more than maximum!"})}else{if(e.itemCount&&e.isLoadedImage&&e.reoadedItemCount==e.itemCount){console.log("masonry resized");clearInterval(e.masonryResizeTask);e(".bricks-wrapper").masonry({itemSelector:".entry",columnWidth:".grid-sizer",percentPosition:true,resize:true});iziToast.show({theme:"dark",timeout:1500,icon:"fa fa-smile-o",position:"topCenter",title:"OK",progressBarColor:"rgb(0, 255, 184)",message:"Masonry resized "+(e.masonryResizeTimes)+" successfully."})}}},500)};var p=function(){t.on("load",function(){e("#featured-post-slider").flexslider({namespace:"flex-",controlsContainer:"",animation:"fade",controlNav:false,directionNav:true,smoothHeight:false,slideshowSpeed:7000,animationSpeed:600,randomize:false,touch:true,});e(".post-slider").flexslider({namespace:"flex-",controlsContainer:"",animation:"fade",controlNav:true,directionNav:false,smoothHeight:false,slideshowSpeed:7000,animationSpeed:600,randomize:false,touch:true,start:function(B){if(typeof B.container==="object"){B.container.on("click",function(C){if(!B.animating){B.flexAnimate(B.getTarget("next"))}})}e(".bricks-wrapper").masonry("layout")}})})};var A=function(){e(".smoothscroll").on("click",function(D){var C=this.hash,B=e(C);D.preventDefault();D.stopPropagation();e("html, body").stop().animate({"scrollTop":B.offset().top},f.scrollDuration,"swing").promise().done(function(){if(e("body").hasClass("menu-is-open")){e("#header-menu-trigger").trigger("click")}window.location.hash=C})})};var a=function(){e("input, textarea, select").placeholder()};var u=function(){var B=500,F=400,E=400,D=300,C=e("#go-top");e(window).on("scroll",function(){if(e(window).scrollTop()>=B){C.fadeIn(F)}else{C.fadeOut(E)}})};(function c(){z(function(){r(function(B){iziToast.show({theme:"dark",timeout:1500,icon:"fa fa-smile-o",position:"topCenter",title:"OK",progressBarColor:"rgb(0, 255, 184)",message:"Data loaded successfully."});if(B||B["incomplete_results"]===false){b(B,function(C){g(C["total_count"]);o();y();q()})}},function(B){if(B=="timeout"){iziToast.error({timeout:5000,icon:"fa fa-frown-o",position:"topRight",title:"TIMEOUT",message:"Network slow, try reload it!"})}})});p();h();k();j();A();a();u()})()})(jQuery);