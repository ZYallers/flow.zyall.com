(function(e){var t=e(window);var v=10;var d="https://api.github.com/search/code?sort=indexed&order=desc";var l="repo:ZYallers/ZYaller+extension:md";var f={defAnimation:"fadeInUp",scrollDuration:800,statsDuration:4000};var w=["/images/random/work1.jpg","/images/random/work2.jpg","/images/random/work3.jpg","/images/random/concert.jpg","/images/random/shutterbug.jpg","/images/random/usaf-rocket.jpg","http://source.unsplash.com/random","https://uploadbeta.com/api/pictures/random?key=Computing","https://uploadbeta.com/api/pictures/random?key=推女郎","https://uploadbeta.com/api/pictures/random?key=车模","https://uploadbeta.com/api/pictures/random?key=性感","https://uploadbeta.com/api/pictures/random?key=Liuyan"];var s=["#",">","`","<","/","*","-"];var n={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(C){var A="";var J,H,F,I,G,E,D;var B=0;C=n._utf8_encode(C);while(B<C.length){J=C.charCodeAt(B++);H=C.charCodeAt(B++);F=C.charCodeAt(B++);I=J>>2;G=((J&3)<<4)|(H>>4);E=((H&15)<<2)|(F>>6);D=F&63;if(isNaN(H)){E=D=64}else{if(isNaN(F)){D=64}}A=A+this._keyStr.charAt(I)+this._keyStr.charAt(G)+this._keyStr.charAt(E)+this._keyStr.charAt(D)}return A},decode:function(C){var A="";var J,H,F;var I,G,E,D;var B=0;C=C.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(B<C.length){I=this._keyStr.indexOf(C.charAt(B++));G=this._keyStr.indexOf(C.charAt(B++));E=this._keyStr.indexOf(C.charAt(B++));D=this._keyStr.indexOf(C.charAt(B++));J=(I<<2)|(G>>4);H=((G&15)<<4)|(E>>2);F=((E&3)<<6)|D;A=A+String.fromCharCode(J);if(E!=64){A=A+String.fromCharCode(H)}if(D!=64){A=A+String.fromCharCode(F)}}A=n._utf8_decode(A);return A},_utf8_encode:function(B){B=B.replace(/\r\n/g,"\n");var A="";for(var D=0;D<B.length;D++){var C=B.charCodeAt(D);if(C<128){A+=String.fromCharCode(C)}else{if((C>127)&&(C<2048)){A+=String.fromCharCode((C>>6)|192);A+=String.fromCharCode((C&63)|128)}else{A+=String.fromCharCode((C>>12)|224);A+=String.fromCharCode(((C>>6)&63)|128);A+=String.fromCharCode((C&63)|128)}}}return A},_utf8_decode:function(A){var C="",E=0,G=0,F=0,D=0,B=0;while(E<A.length){G=A.charCodeAt(E);if(G<128){C+=String.fromCharCode(G);E++}else{if((G>191)&&(G<224)){D=A.charCodeAt(E+1);C+=String.fromCharCode(((G&31)<<6)|(D&63));E+=2}else{D=A.charCodeAt(E+1);B=A.charCodeAt(E+2);C+=String.fromCharCode(((G&15)<<12)|((D&63)<<6)|(B&63));E+=3}}}return C}};var i=function(B){var A=window.location.search.substr(1).match(new RegExp("(^|&)"+B+"=([^&]*)(&|$)"));return A!=null?A[2]:null};var g=function(E){if(!(E>0)||E<=v){return}var C=e(".pagination"),A=[],G=i("q"),H=i("m"),F=i("page")||1,D=Math.ceil(E/v),B=(G?"q="+G:"")+(H?"&m="+H:"");B=B?"?"+B+"&page=":"?page=";if(F==1){A.push('<span class="page-numbers inactive">Prev</span>')}else{if(F>1){A.push('<a href="'+B+(parseInt(F)-1)+'" class="page-numbers">Prev</a>')}}A.push('<span class="page-numbers inactive">'+F+"</span>");if(F==D){A.push('<span class="page-numbers inactive">Next</span>')}else{if(F<D){A.push('<a href="'+B+(parseInt(F)+1)+'" class="page-numbers">Next</a>')}}C.html(A.join("\n"));C.parent().fadeIn()};var m=function(B,A){return B.replace(/\{\{([\w\-_\.]+)\}\}/gi,function(C,D){var E=A;D.split(".").forEach(function(F){E=E[F]});return E})};var b=function(B,G){var D=B["items"],A=D.length,F=e(".bricks-wrapper"),C=e("#lists-item-template").html();e.listItemsLength=A;e.completeListItemsLength=0;for(var E=0;E<A;E++){(function(K,H,I){var J=w[Math.floor((Math.random()*w.length))];if(J.substring(0,4)!="http"){w=e.grep(w,function(M){return M!=J})}var L={"sha":K["sha"],"intro":"","img":J,"link":K["html_url"],"title":K["name"].slice(0,-3),"meta":K["path"].split("/")[1]};L["img"]+=(L["img"].indexOf("?")==-1?"?":"&")+"t="+Math.floor(Math.random()*1000000);L["metalink"]=d+"&q=path:tag/"+L["meta"]+"+"+l;L["meta"]=L["meta"].toUpperCase();H.append(m(I,L));setTimeout(function(){e.ajax({async:true,timeout:10000,dataType:"json",url:K["git_url"],complete:function(U,S){e.completeListItemsLength++;console.log("complete lists items length: "+e.completeListItemsLength,K["sha"]);var O="",T="";if(S=="success"){var R=n.decode(U["responseJSON"]["content"]),M=R.split("\n"),P=M.length;for(var N=2;N<P;N++){var V=e.trim(M[N]),Q=V.slice(0,1);if(T==""&&V!=""&&e.inArray(Q,s)==-1){T=V;break}}}T&&e("[sha="+K["sha"]+"]").find(".entry-excerpt").html(T)}})},100)})(D[E],F,C)}if(typeof(G)=="function"){G(B)}};var r=function(H,A,C){var B=i("q"),G=i("m"),F=i("page")||1,E=(B||"")+"+path:tag"+(G?"/"+G:""),D=d+"&q="+E+"+"+l+"&page="+F+"&per_page="+v;e.ajax({url:D,async:true,timeout:10000,dataType:"json",success:function(I){if(I||I["incomplete_results"]===false){b(I,H)}},complete:function(J,I){if(typeof(A)=="function"){A(J,I)}},error:function(J,I,K){if(typeof(C)=="function"){C(I)}}})};var y=function(A){t.on("load",function(){e("#loader").fadeOut("slow",function(){e("#preloader").delay(300).fadeOut("slow",A)})})};var h=function(){e("ul.sf-menu").superfish({animation:{height:"show"},animationOut:{height:"hide"},cssArrows:false,delay:600})};var k=function(){var A=e(".menu-toggle"),B=e(".main-navigation");A.on("click",function(C){C.preventDefault();A.toggleClass("is-clicked");B.slideToggle()});if(A.is(":visible")){B.addClass("mobile")}t.resize(function(){if(A.is(":visible")){B.addClass("mobile")}else{B.removeClass("mobile")}});e("#main-nav-wrap li a").on("click",function(){if(B.hasClass("mobile")){A.toggleClass("is-clicked");B.fadeOut()}})};var j=function(){var B=e(".search-wrap");var E=B.find(".search-field");var D=e("#close-search");var C=e(".search-trigger");var A=e("body");C.on("click",function(G){G.preventDefault();G.stopPropagation();var F=e(this);A.addClass("search-visible");setTimeout(function(){e(".search-wrap").find(".search-field").focus()},100)});D.on("click",function(F){if(A.hasClass("search-visible")){A.removeClass("search-visible");setTimeout(function(){e(".search-wrap").find(".search-field").blur()},100)}F.stopPropagation()});B.on("click",function(F){if(!e(F.target).is(".search-field")){D.trigger("click")}});E.on("click",function(F){F.stopPropagation()});E.attr({placeholder:"Type Your Keywords",autocomplete:"off"})};var x=function(){e(".bricks-wrapper").imagesLoaded(function(){console.log("images loaded");e.isImagesLoaded=true})};var o=function(){e(".animate-this").each(function(B){var A=e(this);setTimeout(function(){A.addClass("animated fadeInUp")},B*200)});t.on("resize",function(){e(".animate-this").removeClass("animate-this animated fadeInUp")})};var q=function(){e.masonryResizeTimes=0;e.masonryResizeTask=setInterval(function(){console.log("try masonry resize...",e.masonryResizeTimes);e.masonryResizeTimes++;if(e.masonryResizeTimes>60){console.log("try masonry resize more than maximum");clearInterval(e.masonryResizeTask)}else{if(e.listItemsLength&&e.isImagesLoaded&&e.completeListItemsLength==e.listItemsLength){clearInterval(e.masonryResizeTask);e(".bricks-wrapper").masonry({itemSelector:".entry",columnWidth:".grid-sizer",percentPosition:true,resize:true});console.log("masonry resized")}}},500)};var p=function(){t.on("load",function(){e("#featured-post-slider").flexslider({namespace:"flex-",controlsContainer:"",animation:"fade",controlNav:false,directionNav:true,smoothHeight:false,slideshowSpeed:7000,animationSpeed:600,randomize:false,touch:true,});e(".post-slider").flexslider({namespace:"flex-",controlsContainer:"",animation:"fade",controlNav:true,directionNav:false,smoothHeight:false,slideshowSpeed:7000,animationSpeed:600,randomize:false,touch:true,start:function(A){if(typeof A.container==="object"){A.container.on("click",function(B){if(!A.animating){A.flexAnimate(A.getTarget("next"))}})}e(".bricks-wrapper").masonry("layout")}})})};var z=function(){e(".smoothscroll").on("click",function(C){var B=this.hash,A=e(B);C.preventDefault();C.stopPropagation();e("html, body").stop().animate({"scrollTop":A.offset().top},f.scrollDuration,"swing").promise().done(function(){if(e("body").hasClass("menu-is-open")){e("#header-menu-trigger").trigger("click")}window.location.hash=B})})};var a=function(){e("input, textarea, select").placeholder()};var u=function(){var A=500,E=400,D=400,C=300,B=e("#go-top");e(window).on("scroll",function(){if(e(window).scrollTop()>=A){B.fadeIn(E)}else{B.fadeOut(D)}})};(function c(){y(function(){r(function(A){iziToast.show({theme:"dark",timeout:3000,icon:"fa fa-smile-o",position:"topCenter",title:"OK",progressBarColor:"rgb(0, 255, 184)",message:"The data was successfully loaded."});g(A["total_count"]);o();x();q()},null,function(A){if(A=="timeout"){iziToast.error({timeout:5000,icon:"fa fa-frown-o",position:"topRight",title:"TIMEOUT",message:"Network slow, load data timeout, reload it!"})}})});p();h();k();j();z();a();u()})()})(jQuery);